<div class="flex flex-col w-full bg-white rounded-2xl shadow-2xl overflow-hidden border border-[#FA718A]/20">

    <div class="bg-gradient-to-r from-[#FA718A]/10 via-[#FDF1F6]/50 to-[#FA718A]/10 p-6 border-b border-[#FA718A]/20">
        <div class="flex justify-between items-center">

            <div class="flex bg-white/80 backdrop-blur-sm rounded-xl p-1 shadow-lg border border-[#FA718A]/20">
                @for (tab of tabs; track $index) {
                <button class="px-6 py-3 rounded-lg font-semibold transition-all duration-300 transform hover:scale-105"
                    [class]="container === tab.value 
            ? 'text-[#FA718A] bg-[#FA718A]/10 border-2 border-[#FA718A] shadow-md' 
            : 'text-gray-600 hover:text-[#FA718A] hover:bg-[#FA718A]/5'" role="tab" (click)="setContainer(tab.value)">
                    {{tab.label}}
                </button>
                }
            </div>

            @if (paginatedMessages()?.data?.length) {
            <div class="bg-white/80 backdrop-blur-sm rounded-xl shadow-lg border border-[#FA718A]/20">
                <app-paginator class="flex items-center space-x-3 px-4 py-2"
                    [totalCount]="paginatedMessages()?.count || 0" [totalPages]="totalPages()" [pageNumber]="pageIndex"
                    [pageSize]="pageSize" (pageChange)="onPageChange($event)">
                </app-paginator>
            </div>
            }
        </div>
    </div>

    <div class="overflow-x-auto">
        <table class="w-full table table-fixed">
            <thead>
                <tr class="bg-gradient-to-r from-[#FA718A]/5 to-[#FDF1F6]/30">
                    <th class="w-2/8 px-6 py-4 text-left font-bold text-[#FA718A] border-b-2 border-[#FA718A]/20">
                        <div class="flex items-center space-x-2">
                            <span class="text-sm">ğŸ‘¤</span>
                            <span>{{isInbox?'Sender' : 'Recipient'}}</span>
                        </div>
                    </th>
                    <th class="w-4/8 px-6 py-4 text-left font-bold text-[#FA718A] border-b-2 border-[#FA718A]/20">
                        <div class="flex items-center space-x-2">
                            <span class="text-sm">ğŸ’¬</span>
                            <span>Message</span>
                        </div>
                    </th>
                    <th class="w-2/8 px-6 py-4 text-left font-bold text-[#FA718A] border-b-2 border-[#FA718A]/20">
                        <div class="flex items-center space-x-2">
                            <span class="text-sm">ğŸ“…</span>
                            <span>Date</span>
                        </div>
                    </th>
                </tr>
            </thead>
            <tbody class="divide-y divide-gray-100">
                @for (message of paginatedMessages()?.data; track message.id) {
                <tr
                    [class.font-bold]="!message.dateRead && isInbox"
                    routerLink="/members/{{isInbox?message.senderId:message.recipientId}}/messages"
                    class="hover:bg-gradient-to-r hover:from-[#FDF1F6]/50 hover:to-[#FA718A]/5 transition-all duration-200 hover:shadow-md cursor-pointer group">
                    <td class="w-2/8 px-6 py-4">
                        <div class="flex items-center gab-3 ">
                            <img class="w-10 h-10 rounded-full object-cover mx-1"
                                src="{{isInbox?message.senderImageUrl:message.recipientImageUrl}}"
                                alt="{{isInbox?message.senderUserName:message.recipientUserName}}">
                            <span
                                class="text-gray-900 font-medium group-hover:text-gray-800 transition-colors">{{isInbox?message.senderUserName:message.recipientUserName}}</span>
                        </div>
                    </td>
                    <td class="w-4/8 px-6 py-4">
                        <div class="max-w-md">
                            <p
                                class="text-gray-900 font-medium group-hover:text-gray-800 transition-colors line-clamp-2 truncate">
                                {{message.content}}
                            </p>
                        </div>
                    </td>
                    <td class="w-2/8 px-6 py-4">
                        <div class="flex flex-col">
                            <span
                                class="text-sm font-medium text-gray-900 group-hover:text-[#FA718A] transition-colors">
                                {{message.messageSent | date:'MMM d, y'}}
                            </span>
                            <span class="text-xs text-gray-500">
                                {{message.messageSent | date:'h:mm a'}}
                            </span>
                        </div>
                    </td>
                </tr>
                }
            </tbody>
        </table>
    </div>

    <div class="bg-gradient-to-r from-[#FDF1F6]/20 to-[#FA718A]/5 px-6 py-3 border-t border-[#FA718A]/10">
        <p class="text-sm text-gray-600 text-center">
            @if (paginatedMessages()?.data?.length) {
            Showing {{paginatedMessages()?.data?.length}} of {{paginatedMessages()?.count || 0}} messages
            }
        </p>
    </div>
</div>